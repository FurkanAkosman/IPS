<!DOCTYPE html>
<html class="light" lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>IPS Etkinlik Kayıt Sayfası</title>

    <!-- SEO / Social -->
    <meta
      name="description"
      content="IPS etkinliği için kayıt formu. Yüz yüze veya online katılım seçenekleriyle kaydınızı tamamlayın."
    />
    <link rel="canonical" href="https://furkanakosman.github.io/IPS/event-register.html" />
    <meta name="robots" content="index,follow,max-image-preview:large" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />

    <meta property="og:site_name" content="IPS" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="IPS Etkinlik Kayıt Sayfası" />
    <meta
      property="og:description"
      content="IPS etkinliği için kayıt formu. Yüz yüze veya online katılım seçenekleriyle kaydınızı tamamlayın."
    />
    <meta property="og:url" content="https://furkanakosman.github.io/IPS/event-register.html" />
    <meta
      property="og:image"
      content="https://furkanakosman.github.io/IPS/assets/og/ips-event-register.png"
    />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- JSON-LD (Event) - Tarih/saat/konumu etkinliğe göre güncelleyin -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Event",
        "name": "IPS Yıllık Disiplinlerarası İnovasyon Zirvesi",
        "startDate": "2023-10-15T09:00:00+03:00",
        "endDate": "2023-10-15T17:00:00+03:00",
        "eventAttendanceMode": "https://schema.org/MixedEventAttendanceMode",
        "eventStatus": "https://schema.org/EventScheduled",
        "location": [
          {
            "@type": "Place",
            "name": "İTÜ Süleyman Demirel Kültür Merkezi",
            "address": {
              "@type": "PostalAddress",
              "addressLocality": "İstanbul",
              "addressCountry": "TR"
            }
          },
          {
            "@type": "VirtualLocation",
            "url": "https://furkanakosman.github.io/IPS/events.html"
          }
        ],
        "organizer": {
          "@type": "Organization",
          "name": "Interdisciplinary Project Society (IPS)",
          "url": "https://furkanakosman.github.io/IPS/"
        },
        "url": "https://furkanakosman.github.io/IPS/event-register.html"
      }
    </script>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#4d0011",
              "primary-hover": "#6e0019",
              accent: "#d41132",
              "background-light": "#f8f8f3",
              "background-white": "#ffffff",
              "text-main": "#1b0d10",
              "text-muted": "#6b5d60",
              "border-color": "#e7cfd3"
            },
            fontFamily: {
              display: ["Manrope", "sans-serif"]
            },
            borderRadius: {
              DEFAULT: "0.5rem",
              lg: "0.75rem",
              xl: "1rem"
            }
          }
        }
      };
    </script>

    <!-- Global Header/Footer + GA (GA header-loader içinden tekil yüklenecek) -->
    <script defer src="js/header-loader.js"></script>
    <script defer src="js/footer-loader.js"></script>
  </head>

  <body class="bg-background-light text-text-main font-display antialiased min-h-screen flex flex-col">
    <!-- Header partial burada inject edilecek -->

    <main class="flex-grow">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
          <!-- Left Column: Event Details -->
          <aside class="lg:col-span-4 space-y-8">
            <div class="lg:sticky lg:top-24 space-y-8">
              <!-- Page Heading -->
              <div class="flex flex-col gap-4">
                <h1 class="text-text-main text-3xl md:text-4xl font-black leading-tight tracking-tight">
                  IPS Kai-Sen Verimlilik Üzerine Düşünme Etkinliği
                </h1>
                <p class="text-primary text-lg font-medium leading-relaxed border-l-4 border-primary pl-4">
                  Akademik ve profesyonel dünyayı bir araya getiren bu özel etkinlikte yerinizi ayırtın.
                </p>
              </div>

              <!-- Info Card -->
              <div class="bg-white rounded-xl shadow-sm border border-border-color p-6 space-y-6">
                <div class="flex items-start gap-4">
                  <div class="bg-background-light p-2 rounded-lg text-primary">
                    <span class="material-symbols-outlined">calendar_month</span>
                  </div>
                  <div>
                    <p class="text-text-muted text-xs font-bold uppercase tracking-wider mb-1">Tarih</p>
                    <p class="text-text-main font-semibold">14 Şubat 2026</p>
                  </div>
                </div>

                <div class="flex items-start gap-4">
                  <div class="bg-background-light p-2 rounded-lg text-primary">
                    <span class="material-symbols-outlined">schedule</span>
                  </div>
                  <div>
                    <p class="text-text-muted text-xs font-bold uppercase tracking-wider mb-1">Saat</p>
                    <p class="text-text-main font-semibold">14:00 - 17:00</p>
                  </div>
                </div>

                <div class="flex items-start gap-4">
                  <div class="bg-background-light p-2 rounded-lg text-primary">
                    <span class="material-symbols-outlined">location_on</span>
                  </div>
                  <div>
                    <p class="text-text-muted text-xs font-bold uppercase tracking-wider mb-1">Konum</p>
                    <p class="text-text-main font-semibold">GSB ATAKÖY ULUSLARARASI GENÇLİK MERKEZİ</p>
                  </div>
                </div>

                <div class="pt-4 border-t border-border-color">
                  <a
                    class="w-full flex items-center justify-center gap-2 rounded-lg h-10 px-4 bg-background-light hover:bg-[#eaeaea] text-text-main text-sm font-bold border border-border-color transition-colors"
                    href="assets/posters/ips-event-poster.pdf"
                    download
                    data-ga-event="download_poster"
                  >
                    <span class="material-symbols-outlined text-[20px]">download</span>
                    <span>Etkinlik Posterini İndir</span>
                  </a>
                </div>
              </div>

              <!-- Map Placeholder -->
              <div class="hidden lg:block rounded-xl overflow-hidden h-48 bg-gray-200 relative">
                <div class="absolute inset-0 bg-gradient-to-tr from-gray-200 to-gray-300 flex items-center justify-center">
                  <span class="material-symbols-outlined text-gray-400 text-4xl">map</span>
                </div>
                <img
                  alt="Istanbul city map location for the event"
                  class="w-full h-full object-cover opacity-80"
                  data-alt="Map view showing the location of the event center in Istanbul"
                  data-location="Istanbul"
                  src="https://lh3.googleusercontent.com/aida-public/AB6AXuBlNajkt_8tZxEgPKVDtfO-B8EZHRihdMk4nP4PDgtS9ECTKlSYNCn9P37MpZyolZ1eC7ooi2DfAMzk-Q8swl9rNEWZVaIZh05b3WegJRN5U-ky__870ISO9jjPG5ytkwimdNMgjmLCHHDR0CYTdzcLUOgd_EDHFWtGzP9mHC7C5SCyvspVTSNm1Li2CwlRNUmkfEqh8GnWu0FptOOVJZBix75wfbRsG4LmTTKviAPuHNztIdDnOeCpw7HzzMaxZX-FtLmIZlclIdY"
                />
              </div>
            </div>
          </aside>

          <!-- Right Column: Registration Form -->
          <div class="lg:col-span-8">
            <div class="bg-white rounded-xl shadow-sm border border-border-color p-6 md:p-8 lg:p-10">
              <form id="eventRegistrationForm" class="space-y-10" novalidate>
                <!-- Section 1 -->
                <section>
                  <div class="flex items-center gap-3 mb-6 pb-2 border-b border-border-color">
                    <span
                      class="flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold text-sm"
                      >1</span
                    >
                    <h3 class="text-text-main text-lg font-bold">Zorunlu Temel Bilgiler</h3>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="col-span-1 md:col-span-2">
                      <label class="block text-sm font-semibold text-text-main mb-2" for="full_name">
                        Ad - Soyad <span class="text-accent">*</span>
                      </label>
                      <input
                        class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm placeholder:text-text-muted/60 transition-colors"
                        id="full_name"
                        name="full_name"
                        placeholder="Adınız ve Soyadınız"
                        type="text"
                        required
                        autocomplete="name"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-2" for="email">
                        E-posta Adresi <span class="text-accent">*</span>
                      </label>
                      <input
                        class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm placeholder:text-text-muted/60 transition-colors"
                        id="email"
                        name="email"
                        placeholder="ornek@email.com"
                        type="email"
                        required
                        autocomplete="email"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-2" for="phone">
                        Telefon Numarası <span class="text-accent">*</span>
                      </label>
                      <input
                        class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm placeholder:text-text-muted/60 transition-colors"
                        id="phone"
                        name="phone"
                        placeholder="05XX XXX XX XX"
                        type="tel"
                        required
                        autocomplete="tel"
                        inputmode="tel"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-2" for="institution">
                        Kurum / Üniversite / Firma <span class="text-accent">*</span>
                      </label>
                      <input
                        class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm transition-colors"
                        id="institution"
                        name="institution"
                        type="text"
                        required
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-2" for="role">
                        Rol / Unvan <span class="text-accent">*</span>
                      </label>
                      <input
                        class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm placeholder:text-text-muted/60 transition-colors"
                        id="role"
                        name="role"
                        placeholder="Öğrenci, Araştırmacı, Mühendis vb."
                        type="text"
                        required
                      />
                    </div>
                  </div>
                </section>

                <!-- Section 2 -->
                <section>
                  <div class="flex items-center gap-3 mb-6 pb-2 border-b border-border-color">
                    <span
                      class="flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold text-sm"
                      >2</span
                    >
                    <h3 class="text-text-main text-lg font-bold">Etkinliğe Özgü Bilgiler</h3>
                  </div>

                  <div class="grid grid-cols-1 gap-6">
                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-3">
                        Katılım Türü <span class="text-accent">*</span>
                      </label>
                      <div class="flex gap-4 flex-col md:flex-row">
                        <label
                          class="relative flex cursor-pointer items-center rounded-lg border border-border-color p-4 shadow-sm hover:bg-background-light has-[:checked]:border-primary has-[:checked]:bg-primary/5 transition-all w-full md:w-auto"
                        >
                          <input
                            checked
                            class="h-4 w-4 border-border-color text-primary focus:ring-primary"
                            name="participation_type"
                            type="radio"
                            value="face_to_face"
                            required
                          />
                          <span class="ml-3 flex flex-col">
                            <span class="block text-sm font-medium text-text-main">Yüz Yüze Katılım</span>
                            <span class="block text-xs text-text-muted">Mekan kapasitesi ile sınırlıdır</span>
                          </span>
                        </label>

                        <label
                          class="relative flex cursor-pointer items-center rounded-lg border border-border-color p-4 shadow-sm hover:bg-background-light has-[:checked]:border-primary has-[:checked]:bg-primary/5 transition-all w-full md:w-auto"
                        >
                          <input
                            class="h-4 w-4 border-border-color text-primary focus:ring-primary"
                            name="participation_type"
                            type="radio"
                            value="online"
                            required
                          />
                          <span class="ml-3 flex flex-col">
                            <span class="block text-sm font-medium text-text-main">Online Katılım</span>
                            <span class="block text-xs text-text-muted">Zoom linki iletilecektir</span>
                          </span>
                        </label>
                      </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label class="block text-sm font-semibold text-text-main mb-2" for="session"
                          >Etkinlik Oturumu / Gün Seçimi</label
                        >
                        <select
                          class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm transition-colors"
                          id="session"
                          name="session"
                        >
                          <option value="">Seçiniz...</option>
                          <option value="full">Tüm Gün (09:00 - 17:00)</option>
                          <option value="morning">Sabah Oturumu (09:00 - 12:30)</option>
                          <option value="afternoon">Öğle Oturumu (13:30 - 17:00)</option>
                        </select>
                      </div>

                      <div>
                        <label class="block text-sm font-semibold text-text-main mb-2" for="track">Alan / İlgi Başlığı</label>
                        <select
                          class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm transition-colors"
                          id="track"
                          name="track"
                        >
                          <option value="">Seçiniz...</option>
                          <option value="tech">Teknoloji ve İnovasyon</option>
                          <option value="social">Sosyal Etki ve Sürdürülebilirlik</option>
                          <option value="academic">Akademik Araştırmalar</option>
                          <option value="art">Tasarım ve Sanat</option>
                        </select>
                      </div>
                    </div>

                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-2">Daha önce benzer etkinliğe katıldınız mı?</label>
                      <div class="flex items-center gap-6">
                        <div class="flex items-center">
                          <input
                            class="h-4 w-4 border-border-color text-primary focus:ring-primary"
                            id="prev_yes"
                            name="previous_participation"
                            type="radio"
                            value="yes"
                          />
                          <label class="ml-2 block text-sm text-text-main" for="prev_yes">Evet</label>
                        </div>
                        <div class="flex items-center">
                          <input
                            class="h-4 w-4 border-border-color text-primary focus:ring-primary"
                            id="prev_no"
                            name="previous_participation"
                            type="radio"
                            value="no"
                          />
                          <label class="ml-2 block text-sm text-text-main" for="prev_no">Hayır</label>
                        </div>
                      </div>
                    </div>
                  </div>
                </section>

                <!-- Section 3 -->
                <section>
                  <div class="flex items-center gap-3 mb-6 pb-2 border-b border-border-color">
                    <span
                      class="flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold text-sm"
                      >3</span
                    >
                    <h3 class="text-text-main text-lg font-bold">Geri Bildirim ve Beklenti</h3>
                  </div>

                  <div class="grid grid-cols-1 gap-6">
                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-2" for="expectations">
                        Etkinlikten beklentiniz nedir? (Opsiyonel)
                      </label>
                      <textarea
                        class="w-full rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm transition-colors resize-none"
                        id="expectations"
                        name="expectations"
                        placeholder="Kısaca bahsetmek isterseniz..."
                        rows="3"
                      ></textarea>
                    </div>

                    <div>
                      <label class="block text-sm font-semibold text-text-main mb-2" for="source">Etkinliği nereden duydunuz?</label>
                      <select
                        class="w-full md:w-1/2 rounded-lg border-border-color bg-background-light focus:border-primary focus:ring-primary/20 text-text-main py-2.5 px-4 text-sm transition-colors"
                        id="source"
                        name="source"
                      >
                        <option value="">Seçiniz...</option>
                        <option value="social_media">Sosyal Medya</option>
                        <option value="email">E-posta Bülteni</option>
                        <option value="friend">Arkadaş Tavsiyesi</option>
                        <option value="university">Üniversite Duyurusu</option>
                        <option value="other">Diğer</option>
                      </select>
                    </div>
                  </div>
                </section>

                <!-- Section 4 -->
                <section class="bg-background-light rounded-lg p-5 border border-border-color/50">
                  <div class="space-y-4">
                    <div class="flex items-start">
                      <div class="flex h-5 items-center">
                        <input
                          class="h-4 w-4 rounded border-border-color text-primary focus:ring-primary"
                          id="gdpr"
                          name="gdpr"
                          type="checkbox"
                          required
                        />
                      </div>
                      <div class="ml-3 text-sm">
                        <label class="font-medium text-text-main" for="gdpr">
                          KVKK ve Gizlilik Onayı <span class="text-accent">*</span>
                        </label>
                        <p class="text-text-muted text-xs mt-1">
                          Kişisel verilerimin işlenmesine ilişkin
                          <a class="text-primary underline" href="kvkk.html">aydınlatma metnini</a>
                          okudum ve kabul ediyorum.
                        </p>
                      </div>
                    </div>

                    <div class="flex items-start">
                      <div class="flex h-5 items-center">
                        <input
                          class="h-4 w-4 rounded border-border-color text-primary focus:ring-primary"
                          id="photo_consent"
                          name="photo_consent"
                          type="checkbox"
                        />
                      </div>
                      <div class="ml-3 text-sm">
                        <label class="font-medium text-text-main" for="photo_consent">Fotoğraf ve Video Kullanım İzni</label>
                        <p class="text-text-muted text-xs mt-1">
                          Etkinlik süresince çekilen görüntülerin tanıtım materyallerinde kullanılmasına izin veriyorum.
                        </p>
                      </div>
                    </div>

                    <div class="flex items-start">
                      <div class="flex h-5 items-center">
                        <input
                          class="h-4 w-4 rounded border-border-color text-primary focus:ring-primary"
                          id="communication_consent"
                          name="communication_consent"
                          type="checkbox"
                        />
                      </div>
                      <div class="ml-3 text-sm">
                        <label class="font-medium text-text-main" for="communication_consent">İletişim İzni</label>
                        <p class="text-text-muted text-xs mt-1">
                          Gelecek etkinliklerden haberdar olmak için e-posta ve SMS ile iletişime geçilmesine izin veriyorum.
                        </p>
                      </div>
                    </div>
                  </div>
                </section>

                <!-- Submit -->
                <div class="pt-4 flex flex-col md:flex-row gap-4 justify-end items-center">
                  <p class="text-xs text-text-muted">
                    <span class="text-accent">*</span> ile işaretli alanlar zorunludur.
                  </p>
                  <button
                    class="w-full md:w-auto min-w-[200px] flex items-center justify-center rounded-lg h-12 px-8 bg-primary hover:bg-primary-hover text-white text-base font-bold shadow-lg shadow-primary/20 transition-all transform active:scale-95"
                    type="submit"
                    data-ga-event="event_register_submit"
                  >
                    <span>Kaydı Tamamla</span>
                    <span class="material-symbols-outlined ml-2 text-[20px]">arrow_forward</span>
                  </button>
                </div>
              </form>

              <!-- Form -> Google Sheets (Apps Script Web App) -->
              <script>
                (function () {
                  const form = document.getElementById("eventRegistrationForm");
                  const WEB_APP_URL =
                    "https://script.google.com/macros/s/AKfycbw8HkZkC7_wJFmZBwuLT2uya4FzvjFOsmWi6uFHbMz8VWP6txbx1ShGhWvGnUzTUaSEVA/exec";

                  // Honeypot
                  const hp = document.createElement("input");
                  hp.type = "text";
                  hp.name = "website";
                  hp.autocomplete = "off";
                  hp.tabIndex = -1;
                  hp.style.position = "absolute";
                  hp.style.left = "-9999px";
                  form.appendChild(hp);

                  function val(id) {
                    const el = document.getElementById(id);
                    return el ? (el.value || "").trim() : "";
                  }
                  function checked(id) {
                    const el = document.getElementById(id);
                    return !!(el && el.checked);
                  }
                  function radioValue(name) {
                    const el = form.querySelector(`input[name="${name}"]:checked`);
                    return el ? el.value : "";
                  }

                  // data-ga-event click tracking
                  document.addEventListener("click", (e) => {
                    const el = e.target.closest("[data-ga-event]");
                    if (!el || typeof window.gtag !== "function") return;
                    window.gtag("event", el.getAttribute("data-ga-event"), { page_path: location.pathname });
                  });

                  form.addEventListener("submit", async (e) => {
                    e.preventDefault();

                    if ((hp.value || "").trim()) return;

                    const payload = {
                      full_name: val("full_name"),
                      email: val("email"),
                      phone: val("phone"),
                      institution: val("institution"),
                      role: val("role"),

                      participation_type: radioValue("participation_type"),
                      session: val("session"),
                      track: val("track"),
                      previous_participation: radioValue("previous_participation"),

                      expectations: val("expectations"),
                      source: val("source"),

                      gdpr: checked("gdpr"),
                      photo_consent: checked("photo_consent"),
                      communication_consent: checked("communication_consent"),

                      page_path: location.pathname,
                      user_agent: navigator.userAgent
                    };

                    if (!payload.full_name || !payload.email || !payload.phone || !payload.institution || !payload.role) {
                      alert("Lütfen zorunlu alanları doldurun.");
                      return;
                    }
                    if (!payload.gdpr) {
                      alert("KVKK ve Gizlilik Onayı zorunludur.");
                      return;
                    }
                    if (!payload.participation_type) {
                      alert("Katılım türünü seçin.");
                      return;
                    }

                    const submitBtn = form.querySelector('button[type="submit"]');
                    const oldHtml = submitBtn ? submitBtn.innerHTML : "";
                    if (submitBtn) {
                      submitBtn.disabled = true;
                      submitBtn.classList.add("opacity-70");
                      submitBtn.innerHTML = "Kaydediliyor...";
                    }

                    try {
                      const res = await fetch(WEB_APP_URL, {
                        method: "POST",
                        headers: { "Content-Type": "text/plain;charset=utf-8" },
                        body: JSON.stringify(payload)
                      });

                      const txt = await res.text();
                      let json;
                      try {
                        json = JSON.parse(txt);
                      } catch {
                        json = { ok: true, raw: txt };
                      }
                      if (json && json.ok === false) throw new Error(json.error || "Kayıt hatası");

                      if (typeof window.gtag === "function") {
                        window.gtag("event", "event_register_submit_success", { page_path: location.pathname });
                      }

                      alert("Kayıt alındı. Teşekkürler.");
                      form.reset();
                    } catch (err) {
                      if (typeof window.gtag === "function") {
                        window.gtag("event", "event_register_submit_error", { page_path: location.pathname });
                      }
                      console.error(err);
                      alert("Kayıt alınamadı. Lütfen tekrar deneyin.");
                    } finally {
                      if (submitBtn) {
                        submitBtn.disabled = false;
                        submitBtn.classList.remove("opacity-70");
                        submitBtn.innerHTML = oldHtml || '<span>Kaydı Tamamla</span>';
                      }
                    }
                  });
                })();
              </script>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer partial burada inject edilecek -->
  </body>
</html>
